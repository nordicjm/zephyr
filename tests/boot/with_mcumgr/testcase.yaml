common:
  sysbuild: true
  platform_allow:
    - nrf52840dk_nrf52840
    - nrf5340dk_nrf5340_cpuapp
    - nrf9160dk_nrf9160
  integration_platforms:
    - nrf52840dk_nrf52840
  timeout: 600
tests:
  boot.with_mcumgr.test_upgrade:
    tags: pytest mcuboot mcumgr
    harness: pytest
    harness_config:
      pytest_args: ["-k=test_upgrade.py"]

  boot.with_mcumgr.test_downgrade_prevention:
    tags: pytest mcuboot mcumgr
    harness: pytest
    harness_config:
      pytest_args: ["-k=test_downgrade_prevention"]
    extra_args:
      - OVERLAY_CONFIG="overlay-mcuboot-version.conf"
      - mcuboot_CONFIG_MCUBOOT_DOWNGRADE_PREVENTION=y
